# ChatJu Premium ì»¤ë®¤ë‹ˆí‹° ê´€ë¦¬ í†µí•© ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2025-11-13
**í”„ë¡œì íŠ¸**: ChatJu Premium
**ë²„ì „**: 1.0.0

---

## ğŸ“Œ ê°œìš”

ì´ ë¬¸ì„œëŠ” ChatJu Premium ì‚¬ì£¼íŒ”ì ì„œë¹„ìŠ¤ì™€ ì¹´ì¹´ì˜¤í†¡ ì˜¤í”ˆì±„íŒ… ìë™í™”ë¥¼ í†µí•©í•˜ì—¬ íš¨ê³¼ì ì¸ ì»¤ë®¤ë‹ˆí‹° ê´€ë¦¬ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

---

## ğŸ¯ ëª©í‘œ

### ë¹„ì¦ˆë‹ˆìŠ¤ ëª©í‘œ
1. **ì‚¬ìš©ì í”¼ë“œë°± ìë™ ìˆ˜ì§‘** - ì„œë¹„ìŠ¤ ê°œì„  ì¸ì‚¬ì´íŠ¸ í™•ë³´
2. **ì»¤ë®¤ë‹ˆí‹° í™œì„±í™”** - K-wave íŒ¬ë¤ ì¤‘ì‹¬ì˜ ìœ ê¸°ì  ì»¤ë®¤ë‹ˆí‹° í˜•ì„±
3. **í”„ë¦¬ë¯¸ì—„ ì „í™˜ìœ¨ í–¥ìƒ** - ì»¤ë®¤ë‹ˆí‹° ë‚´ ìì—°ìŠ¤ëŸ¬ìš´ ì—…ì…€
4. **FAQ ìë™ ìƒì„±** - ê³ ê° ì§€ì› íš¨ìœ¨í™”

### ê¸°ìˆ  ëª©í‘œ
1. **ìë™í™” íŒŒì´í”„ë¼ì¸ êµ¬ì¶•** - ìˆ˜ë™ ì‘ì—… ìµœì†Œí™”
2. **AI ë¶„ì„ í†µí•©** - OpenAI/Geminië¥¼ í™œìš©í•œ ì¸ì‚¬ì´íŠ¸ ë„ì¶œ
3. **ë°ì´í„° ì¶•ì ** - Supabaseì— ë¶„ì„ ê²°ê³¼ ì €ì¥
4. **ëŒ€ì‹œë³´ë“œ êµ¬ì¶•** - ì‹¤ì‹œê°„ ì»¤ë®¤ë‹ˆí‹° í˜„í™© ëª¨ë‹ˆí„°ë§

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ChatJu Premium ìƒíƒœê³„                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   Frontend   â”‚ â†â”€â”€â†’   â”‚   Backend    â”‚              â”‚
â”‚  â”‚  (Next.js)   â”‚        â”‚  (Express)   â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                  â”‚                       â”‚
â”‚                                  â†“                       â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚                         â”‚   Supabase     â”‚              â”‚
â”‚                         â”‚  PostgreSQL    â”‚              â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                  â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                  â”‚                   â”‚
                â†“                  â†“                   â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Readings    â”‚  â”‚   Payments   â”‚  â”‚  Community   â”‚
        â”‚    Data      â”‚  â”‚     Data     â”‚  â”‚   Analytics  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ì»¤ë®¤ë‹ˆí‹° ê´€ë¦¬ ìë™í™” ì‹œìŠ¤í…œ                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  KakaoTalk   â”‚  â†’â†’â†’   â”‚  Google      â”‚              â”‚
â”‚  â”‚  OpenChat    â”‚  ë‚´ë³´ë‚´ê¸°  â”‚  Drive       â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                  â”‚                       â”‚
â”‚                                  â†“                       â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚                         â”‚  n8n Workflow  â”‚              â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                  â”‚                       â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚                  â†“               â†“               â†“      â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚          â”‚   Parser    â”‚ â”‚   AI LLM    â”‚ â”‚   Export    â”‚â”‚
â”‚          â”‚  (Node.js)  â”‚ â”‚  (OpenAI)   â”‚ â”‚  (Notion)   â”‚â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ êµ¬í˜„ ë¡œë“œë§µ

### Phase 1: ê¸°ë³¸ ì¸í”„ë¼ êµ¬ì¶• (1ì£¼)

#### 1.1 ì˜¤í”ˆì±„íŒ…ë°© ê°œì„¤
```
ëª©í‘œ: ChatJu ê³µì‹ ì»¤ë®¤ë‹ˆí‹° ì˜¤í”ˆì±„íŒ…ë°© ìš´ì˜ ì‹œì‘

ì‘ì—…:
- [ ] ì¹´ì¹´ì˜¤í†¡ ì˜¤í”ˆì±„íŒ…ë°© ìƒì„±
- [ ] ë°© ì´ë¦„: "ChatJu ì‚¬ì£¼í’€ì´ | K-pop ê¶í•© ì»¤ë®¤ë‹ˆí‹°"
- [ ] ë°© ì„¤ëª…: "AI ì‚¬ì£¼ ì„œë¹„ìŠ¤ ChatJu ê³µì‹ ì»¤ë®¤ë‹ˆí‹°. ì‚¬ì£¼ ì§ˆë¬¸, K-pop ì•„ì´ëŒ ê¶í•© í† ë¡ , í”„ë¦¬ë¯¸ì—„ í˜œíƒ ì•ˆë‚´"
- [ ] ìš´ì˜ ê·œì¹™ ê³µì§€
- [ ] ê´€ë¦¬ì 2ëª… ì´ìƒ ì§€ì •

ìš´ì˜ ê·œì¹™ ì˜ˆì‹œ:
1. ìŠ¤íŒ¸/ê´‘ê³  ê¸ˆì§€
2. ìƒí˜¸ ì¡´ì¤‘
3. ëŒ€í™” ë¡œê·¸ëŠ” ì„œë¹„ìŠ¤ ê°œì„  ëª©ì ìœ¼ë¡œ ë¶„ì„ë¨ (ê°œì¸ì •ë³´ ì œì™¸)
4. í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ì ì „ìš© í˜œíƒ ì•ˆë‚´
```

#### 1.2 ì´ˆê¸° ì‚¬ìš©ì ëª¨ì§‘
```
ëª©í‘œ: 50-100ëª… ì´ˆê¸° ë©¤ë²„ í™•ë³´

ì±„ë„:
- Reddit (r/kpop, r/kdrama)
- Twitter/X (K-pop í•´ì‹œíƒœê·¸)
- ê¸°ì¡´ ì‚¬ì£¼ ì»¤ë®¤ë‹ˆí‹° í¬ë¡œìŠ¤ í¬ìŠ¤íŒ…
- ì¹œêµ¬/ì§€ì¸ ì´ˆëŒ€

ì¸ì„¼í‹°ë¸Œ:
- ì´ˆê¸° ë©¤ë²„ í•œì • í”„ë¦¬ë¯¸ì—„ 30% í• ì¸
- ë² íƒ€ í…ŒìŠ¤í„° ë°°ì§€
- ì›”ê°„ ìš°ìˆ˜ ë©¤ë²„ ë¬´ë£Œ í”„ë¦¬ë¯¸ì—„ ì œê³µ
```

#### 1.3 Supabase í…Œì´ë¸” ìƒì„±

**ìƒˆ í…Œì´ë¸”: `community_analytics`**

```sql
-- ì»¤ë®¤ë‹ˆí‹° ë¶„ì„ ê²°ê³¼ í…Œì´ë¸”
CREATE TABLE community_analytics (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  analysis_date DATE NOT NULL,
  source_file TEXT,
  total_messages INTEGER,
  total_users INTEGER,
  total_links INTEGER,
  total_questions INTEGER,
  top_keywords JSONB,
  ai_summary TEXT,
  ai_link_analysis TEXT,
  ai_question_analysis TEXT,
  sentiment_score NUMERIC(3,2),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_community_analytics_date ON community_analytics(analysis_date);
CREATE INDEX idx_community_analytics_created ON community_analytics(created_at);

-- ì»¤ë®¤ë‹ˆí‹° FAQ í…Œì´ë¸”
CREATE TABLE community_faq (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  question TEXT NOT NULL,
  answer TEXT,
  frequency INTEGER DEFAULT 1,
  source_analysis_id UUID REFERENCES community_analytics(id),
  status TEXT DEFAULT 'pending', -- pending, approved, rejected
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì»¤ë®¤ë‹ˆí‹° í”¼ë“œë°± í…Œì´ë¸”
CREATE TABLE community_feedback (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  feedback_type TEXT, -- bug, feature_request, praise, complaint
  content TEXT NOT NULL,
  username TEXT,
  timestamp TIMESTAMP WITH TIME ZONE,
  source_analysis_id UUID REFERENCES community_analytics(id),
  status TEXT DEFAULT 'new', -- new, in_progress, resolved, wont_fix
  assigned_to TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Row Level Security
ALTER TABLE community_analytics ENABLE ROW LEVEL SECURITY;
ALTER TABLE community_faq ENABLE ROW LEVEL SECURITY;
ALTER TABLE community_feedback ENABLE ROW LEVEL SECURITY;

-- Policies (ê´€ë¦¬ìë§Œ ì ‘ê·¼)
CREATE POLICY "Admin access to community_analytics" ON community_analytics
  FOR ALL USING (auth.uid() IN (SELECT id FROM users WHERE role = 'admin'));

CREATE POLICY "Admin access to community_faq" ON community_faq
  FOR ALL USING (auth.uid() IN (SELECT id FROM users WHERE role = 'admin'));

CREATE POLICY "Admin access to community_feedback" ON community_feedback
  FOR ALL USING (auth.uid() IN (SELECT id FROM users WHERE role = 'admin'));
```

---

### Phase 2: n8n ì›Œí¬í”Œë¡œ êµ¬ì¶• (3-5ì¼)

#### 2.1 n8n ì„¤ì¹˜

**ì˜µì…˜ A: Self-hosted (Docker)**
```bash
# Docker Composeë¡œ n8n ì„¤ì¹˜
cd /path/to/chatju-premium
mkdir -p automation/n8n
cd automation/n8n

cat > docker-compose.yml <<EOF
version: '3.8'

services:
  n8n:
    image: n8nio/n8n
    container_name: chatju-n8n
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=admin
      - N8N_BASIC_AUTH_PASSWORD=changeme123
      - N8N_HOST=localhost
      - N8N_PORT=5678
      - N8N_PROTOCOL=http
      - NODE_ENV=production
      - WEBHOOK_URL=http://localhost:5678/
    volumes:
      - n8n_data:/home/node/.n8n
    restart: unless-stopped

volumes:
  n8n_data:
EOF

# ì‹¤í–‰
docker-compose up -d

# ì ‘ì†: http://localhost:5678
```

**ì˜µì…˜ B: n8n Cloud (ì¶”ì²œ)**
```
1. https://n8n.io íšŒì›ê°€ì…
2. ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ìƒì„±
3. ë¬´ë£Œ í”Œëœìœ¼ë¡œ ì‹œì‘ (ì›” 5,000 ì‹¤í–‰ê¹Œì§€ ë¬´ë£Œ)
```

#### 2.2 ì›Œí¬í”Œë¡œ Import

```bash
# docs/community/N8N_WORKFLOW_EXAMPLE.md íŒŒì¼ì˜ JSON ë³µì‚¬
# n8n ëŒ€ì‹œë³´ë“œì—ì„œ "Import from File" í´ë¦­
# JSON ë¶™ì—¬ë„£ê¸° â†’ Import
```

#### 2.3 Credentials ì„¤ì •

| Credential | ë°œê¸‰ ë°©ë²• | ì„¤ì • ìœ„ì¹˜ |
|-----------|----------|---------|
| **Google Drive OAuth2** | [Google Cloud Console](https://console.cloud.google.com) | n8n â†’ Credentials â†’ Add |
| **OpenAI API** | [OpenAI Platform](https://platform.openai.com/api-keys) | n8n â†’ Credentials â†’ Add |
| **Notion API** | [Notion Integrations](https://www.notion.so/my-integrations) | n8n â†’ Credentials â†’ Add |
| **Slack API** | [Slack Apps](https://api.slack.com/apps) | n8n â†’ Credentials â†’ Add |

#### 2.4 í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

n8n ì„¤ì •ì—ì„œ ì¶”ê°€:
```env
NOTION_PARENT_PAGE_ID=your-notion-page-id
SLACK_CHANNEL_ID=C01234567
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_KEY=your-service-key
```

---

### Phase 3: ë°±ì—”ë“œ API í†µí•© (2-3ì¼)

#### 3.1 ìƒˆ API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€

**íŒŒì¼: `backend/src/routes/community.routes.js`**

```javascript
const express = require('express');
const router = express.Router();
const { authenticateJWT } = require('../middleware/auth');
const communityService = require('../services/community.service');

// ê´€ë¦¬ì ì „ìš© ë¯¸ë“¤ì›¨ì–´
const requireAdmin = (req, res, next) => {
  if (!req.user || req.user.role !== 'admin') {
    return res.status(403).json({ error: 'Admin access required' });
  }
  next();
};

// ì»¤ë®¤ë‹ˆí‹° ë¶„ì„ ê²°ê³¼ ì¡°íšŒ
router.get('/analytics', authenticateJWT, requireAdmin, async (req, res) => {
  try {
    const { startDate, endDate, limit = 30 } = req.query;
    const analytics = await communityService.getAnalytics({
      startDate,
      endDate,
      limit: parseInt(limit)
    });
    res.json(analytics);
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// íŠ¹ì • ë‚ ì§œì˜ ë¶„ì„ ê²°ê³¼ ì¡°íšŒ
router.get('/analytics/:date', authenticateJWT, requireAdmin, async (req, res) => {
  try {
    const { date } = req.params;
    const analysis = await communityService.getAnalysisByDate(date);
    res.json(analysis);
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// FAQ ì¡°íšŒ
router.get('/faq', async (req, res) => {
  try {
    const { status = 'approved', limit = 10 } = req.query;
    const faqs = await communityService.getFAQs({
      status,
      limit: parseInt(limit)
    });
    res.json(faqs);
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// FAQ ìŠ¹ì¸/ê±°ë¶€ (ê´€ë¦¬ì)
router.patch('/faq/:id', authenticateJWT, requireAdmin, async (req, res) => {
  try {
    const { id } = req.params;
    const { status, answer } = req.body;
    const updated = await communityService.updateFAQ(id, { status, answer });
    res.json(updated);
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// í”¼ë“œë°± ì¡°íšŒ (ê´€ë¦¬ì)
router.get('/feedback', authenticateJWT, requireAdmin, async (req, res) => {
  try {
    const { status, type, limit = 50 } = req.query;
    const feedback = await communityService.getFeedback({
      status,
      type,
      limit: parseInt(limit)
    });
    res.json(feedback);
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// í”¼ë“œë°± ìƒíƒœ ì—…ë°ì´íŠ¸ (ê´€ë¦¬ì)
router.patch('/feedback/:id', authenticateJWT, requireAdmin, async (req, res) => {
  try {
    const { id } = req.params;
    const { status, assigned_to } = req.body;
    const updated = await communityService.updateFeedback(id, { status, assigned_to });
    res.json(updated);
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// n8n webhook - ë¶„ì„ ê²°ê³¼ ì €ì¥ (n8nì—ì„œ í˜¸ì¶œ)
router.post('/webhook/analysis', async (req, res) => {
  try {
    // n8nì—ì„œ ì „ì†¡í•œ ë¶„ì„ ê²°ê³¼ ì €ì¥
    const analysisData = req.body;
    const result = await communityService.saveAnalysis(analysisData);
    res.json({ success: true, id: result.id });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

module.exports = router;
```

**íŒŒì¼: `backend/src/services/community.service.js`**

```javascript
const { createClient } = require('@supabase/supabase-js');

const supabase = createClient(
  process.env.SUPABASE_URL,
  process.env.SUPABASE_SERVICE_KEY
);

/**
 * ì»¤ë®¤ë‹ˆí‹° ë¶„ì„ ì„œë¹„ìŠ¤
 */
class CommunityService {
  /**
   * ë¶„ì„ ê²°ê³¼ ì €ì¥
   */
  async saveAnalysis(data) {
    const { data: result, error } = await supabase
      .from('community_analytics')
      .insert([{
        analysis_date: data.date,
        source_file: data.source_file,
        total_messages: data.total_messages,
        total_users: data.total_users,
        total_links: data.total_links,
        total_questions: data.total_questions,
        top_keywords: data.top_keywords,
        ai_summary: data.ai_summary,
        ai_link_analysis: data.ai_link_analysis,
        ai_question_analysis: data.ai_question_analysis,
        sentiment_score: data.sentiment_score || 0
      }])
      .select()
      .single();

    if (error) throw error;

    // FAQ ì €ì¥
    if (data.questions && data.questions.length > 0) {
      await this.saveFAQs(data.questions, result.id);
    }

    return result;
  }

  /**
   * FAQ ì €ì¥
   */
  async saveFAQs(questions, analysisId) {
    const faqData = questions.map(q => ({
      question: q.question,
      source_analysis_id: analysisId,
      status: 'pending'
    }));

    const { error } = await supabase
      .from('community_faq')
      .insert(faqData);

    if (error) throw error;
  }

  /**
   * ë¶„ì„ ê²°ê³¼ ì¡°íšŒ
   */
  async getAnalytics({ startDate, endDate, limit }) {
    let query = supabase
      .from('community_analytics')
      .select('*')
      .order('analysis_date', { ascending: false })
      .limit(limit);

    if (startDate) {
      query = query.gte('analysis_date', startDate);
    }
    if (endDate) {
      query = query.lte('analysis_date', endDate);
    }

    const { data, error } = await query;
    if (error) throw error;
    return data;
  }

  /**
   * íŠ¹ì • ë‚ ì§œ ë¶„ì„ ê²°ê³¼ ì¡°íšŒ
   */
  async getAnalysisByDate(date) {
    const { data, error } = await supabase
      .from('community_analytics')
      .select('*')
      .eq('analysis_date', date)
      .single();

    if (error) throw error;
    return data;
  }

  /**
   * FAQ ì¡°íšŒ
   */
  async getFAQs({ status, limit }) {
    const { data, error } = await supabase
      .from('community_faq')
      .select('*')
      .eq('status', status)
      .order('frequency', { ascending: false })
      .limit(limit);

    if (error) throw error;
    return data;
  }

  /**
   * FAQ ì—…ë°ì´íŠ¸
   */
  async updateFAQ(id, updates) {
    const { data, error } = await supabase
      .from('community_faq')
      .update(updates)
      .eq('id', id)
      .select()
      .single();

    if (error) throw error;
    return data;
  }

  /**
   * í”¼ë“œë°± ì¡°íšŒ
   */
  async getFeedback({ status, type, limit }) {
    let query = supabase
      .from('community_feedback')
      .select('*')
      .order('created_at', { ascending: false })
      .limit(limit);

    if (status) {
      query = query.eq('status', status);
    }
    if (type) {
      query = query.eq('feedback_type', type);
    }

    const { data, error } = await query;
    if (error) throw error;
    return data;
  }

  /**
   * í”¼ë“œë°± ì—…ë°ì´íŠ¸
   */
  async updateFeedback(id, updates) {
    const { data, error } = await supabase
      .from('community_feedback')
      .update(updates)
      .eq('id', id)
      .select()
      .single();

    if (error) throw error;
    return data;
  }
}

module.exports = new CommunityService();
```

#### 3.2 ë¼ìš°íŠ¸ ë“±ë¡

**íŒŒì¼: `backend/index.js`**

```javascript
// ... ê¸°ì¡´ ì½”ë“œ

// ë¼ìš°íŠ¸ ì¶”ê°€
const communityRoutes = require('./src/routes/community.routes');
app.use('/community', communityRoutes);

// ... ê¸°ì¡´ ì½”ë“œ
```

---

### Phase 4: í”„ë¡ íŠ¸ì—”ë“œ ëŒ€ì‹œë³´ë“œ (3-5ì¼)

#### 4.1 ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ í˜ì´ì§€

**íŒŒì¼: `frontend/app/admin/community/page.tsx`**

```typescript
'use client';

import { useEffect, useState } from 'react';
import { apiClient } from '@/lib/api-client';
import { Card } from '@/components/ui/Card';
import { Loading } from '@/components/ui/Loading';

interface Analytics {
  id: string;
  analysis_date: string;
  total_messages: number;
  total_users: number;
  total_links: number;
  total_questions: number;
  top_keywords: { word: string; count: number }[];
  ai_summary: string;
}

export default function CommunityDashboard() {
  const [analytics, setAnalytics] = useState<Analytics[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadAnalytics();
  }, []);

  const loadAnalytics = async () => {
    try {
      const data = await apiClient.get<Analytics[]>('/community/analytics?limit=30');
      setAnalytics(data);
    } catch (error) {
      console.error('Failed to load analytics:', error);
    } finally {
      setLoading(false);
    }
  };

  if (loading) return <Loading variant="spinner" />;

  return (
    <div className="max-w-7xl mx-auto p-6">
      <h1 className="text-3xl font-bold mb-6">ì»¤ë®¤ë‹ˆí‹° ëŒ€ì‹œë³´ë“œ</h1>

      {/* í†µê³„ ìš”ì•½ */}
      <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
        <Card>
          <div className="p-4">
            <p className="text-sm text-gray-600">ì´ ë¶„ì„ ì¼ìˆ˜</p>
            <p className="text-2xl font-bold">{analytics.length}ì¼</p>
          </div>
        </Card>
        <Card>
          <div className="p-4">
            <p className="text-sm text-gray-600">ì´ ë©”ì‹œì§€</p>
            <p className="text-2xl font-bold">
              {analytics.reduce((sum, a) => sum + a.total_messages, 0)}
            </p>
          </div>
        </Card>
        <Card>
          <div className="p-4">
            <p className="text-sm text-gray-600">í‰ê·  í™œì„± ì‚¬ìš©ì</p>
            <p className="text-2xl font-bold">
              {Math.round(analytics.reduce((sum, a) => sum + a.total_users, 0) / analytics.length)}
            </p>
          </div>
        </Card>
        <Card>
          <div className="p-4">
            <p className="text-sm text-gray-600">ì´ ê³µìœ  ë§í¬</p>
            <p className="text-2xl font-bold">
              {analytics.reduce((sum, a) => sum + a.total_links, 0)}
            </p>
          </div>
        </Card>
      </div>

      {/* ì¼ë³„ ë¶„ì„ */}
      <h2 className="text-2xl font-bold mb-4">ì¼ë³„ ë¶„ì„</h2>
      <div className="space-y-4">
        {analytics.map((item) => (
          <Card key={item.id}>
            <div className="p-6">
              <div className="flex justify-between items-start mb-4">
                <div>
                  <h3 className="text-xl font-semibold">{item.analysis_date}</h3>
                  <p className="text-sm text-gray-600">
                    ë©”ì‹œì§€: {item.total_messages} | ì‚¬ìš©ì: {item.total_users} |
                    ë§í¬: {item.total_links} | ì§ˆë¬¸: {item.total_questions}
                  </p>
                </div>
              </div>

              <div className="mb-4">
                <h4 className="font-semibold mb-2">AI ìš”ì•½</h4>
                <p className="text-gray-700 whitespace-pre-line">{item.ai_summary}</p>
              </div>

              <div>
                <h4 className="font-semibold mb-2">ì£¼ìš” í‚¤ì›Œë“œ</h4>
                <div className="flex flex-wrap gap-2">
                  {item.top_keywords?.slice(0, 10).map((kw, idx) => (
                    <span
                      key={idx}
                      className="px-3 py-1 bg-navy-light text-white rounded-full text-sm"
                    >
                      {kw.word} ({kw.count})
                    </span>
                  ))}
                </div>
              </div>
            </div>
          </Card>
        ))}
      </div>
    </div>
  );
}
```

#### 4.2 FAQ ê´€ë¦¬ í˜ì´ì§€

**íŒŒì¼: `frontend/app/admin/community/faq/page.tsx`**

```typescript
'use client';

import { useEffect, useState } from 'react';
import { apiClient } from '@/lib/api-client';
import { Card } from '@/components/ui/Card';
import { Button } from '@/components/ui/Button';

interface FAQ {
  id: string;
  question: string;
  answer?: string;
  frequency: number;
  status: 'pending' | 'approved' | 'rejected';
  created_at: string;
}

export default function FAQManagement() {
  const [faqs, setFaqs] = useState<FAQ[]>([]);
  const [filter, setFilter] = useState<'pending' | 'approved' | 'rejected'>('pending');

  useEffect(() => {
    loadFAQs();
  }, [filter]);

  const loadFAQs = async () => {
    const data = await apiClient.get<FAQ[]>(`/community/faq?status=${filter}&limit=50`);
    setFaqs(data);
  };

  const updateFAQ = async (id: string, status: string, answer?: string) => {
    await apiClient.patch(`/community/faq/${id}`, { status, answer });
    loadFAQs();
  };

  return (
    <div className="max-w-7xl mx-auto p-6">
      <h1 className="text-3xl font-bold mb-6">FAQ ê´€ë¦¬</h1>

      {/* í•„í„° */}
      <div className="flex gap-2 mb-6">
        <Button
          variant={filter === 'pending' ? 'primary' : 'outline'}
          onClick={() => setFilter('pending')}
        >
          ëŒ€ê¸° ì¤‘
        </Button>
        <Button
          variant={filter === 'approved' ? 'primary' : 'outline'}
          onClick={() => setFilter('approved')}
        >
          ìŠ¹ì¸ë¨
        </Button>
        <Button
          variant={filter === 'rejected' ? 'primary' : 'outline'}
          onClick={() => setFilter('rejected')}
        >
          ê±°ë¶€ë¨
        </Button>
      </div>

      {/* FAQ ë¦¬ìŠ¤íŠ¸ */}
      <div className="space-y-4">
        {faqs.map((faq) => (
          <Card key={faq.id}>
            <div className="p-6">
              <p className="font-semibold mb-2">{faq.question}</p>
              <p className="text-sm text-gray-600 mb-4">ë¹ˆë„: {faq.frequency}</p>

              {faq.status === 'pending' && (
                <div className="flex gap-2">
                  <Button
                    variant="primary"
                    onClick={() => updateFAQ(faq.id, 'approved')}
                  >
                    ìŠ¹ì¸
                  </Button>
                  <Button
                    variant="outline"
                    onClick={() => updateFAQ(faq.id, 'rejected')}
                  >
                    ê±°ë¶€
                  </Button>
                </div>
              )}

              {faq.answer && (
                <div className="mt-4 p-4 bg-gray-50 rounded">
                  <p className="text-sm">{faq.answer}</p>
                </div>
              )}
            </div>
          </Card>
        ))}
      </div>
    </div>
  );
}
```

---

## ğŸš€ ìš´ì˜ ê°€ì´ë“œ

### ì¼ì¼ ìš´ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### ì•„ì¹¨ (09:00)
- [ ] ì „ë‚  ì»¤ë®¤ë‹ˆí‹° ë¦¬í¬íŠ¸ í™•ì¸ (Notion/Slack)
- [ ] ê¸´ê¸‰ í”¼ë“œë°± í™•ì¸ (ë²„ê·¸, ê²°ì œ ë¬¸ì œ ë“±)
- [ ] FAQ ëŒ€ê¸° ëª©ë¡ ê²€í†  ë° ìŠ¹ì¸
- [ ] ì£¼ìš” í‚¤ì›Œë“œ íŠ¸ë Œë“œ í™•ì¸

#### ì ì‹¬ (12:00)
- [ ] ì‹¤ì‹œê°„ ì»¤ë®¤ë‹ˆí‹° ëª¨ë‹ˆí„°ë§ (ë¶€ì ì ˆí•œ ë‚´ìš© í™•ì¸)
- [ ] ì‚¬ìš©ì ì§ˆë¬¸ì— ë‹µë³€
- [ ] í”„ë¦¬ë¯¸ì—„ ê´€ë ¨ ë¬¸ì˜ ìš°ì„  ì²˜ë¦¬

#### ì €ë… (18:00)
- [ ] ì˜¤ëŠ˜ ëŒ€í™” ë‚´ë³´ë‚´ê¸° ì‹¤í–‰
- [ ] Google Driveì— ì—…ë¡œë“œ (n8n íŠ¸ë¦¬ê±°)
- [ ] ë¶„ì„ ê²°ê³¼ ëŒ€ê¸° (30ë¶„ ì†Œìš”)
- [ ] ê²°ê³¼ ê²€í†  ë° ëŒ€ì‘ ì‚¬í•­ ì •ë¦¬

#### ì£¼ê°„ (ê¸ˆìš”ì¼)
- [ ] ì£¼ê°„ ì»¤ë®¤ë‹ˆí‹° ë¦¬í¬íŠ¸ ìƒì„±
- [ ] ì¸ê¸° ì£¼ì œ TOP 5 ì •ë¦¬
- [ ] í”„ë¦¬ë¯¸ì—„ ì „í™˜ìœ¨ ë¶„ì„
- [ ] ë‹¤ìŒ ì£¼ ì´ë²¤íŠ¸ ê³„íš

---

## ğŸ’¡ Best Practices

### ì»¤ë®¤ë‹ˆí‹° í™œì„±í™” ì „ëµ

#### 1. ì •ê¸° ì´ë²¤íŠ¸
```
ë§¤ì£¼ ì›”ìš”ì¼: "ì´ë²ˆ ì£¼ ìš´ì„¸" ë¬´ë£Œ í”„ë¦¬ë·°
ë§¤ì£¼ ìˆ˜ìš”ì¼: "K-pop ì•„ì´ëŒ ì‚¬ì£¼ ë¶„ì„" íˆ¬í‘œ
ë§¤ì£¼ ê¸ˆìš”ì¼: "ì£¼ê°„ ìš°ìˆ˜ ë©¤ë²„" í”„ë¦¬ë¯¸ì—„ ì¦ì •
```

#### 2. ì½˜í…ì¸  ì‹œë”©
```
- ê´€ë¦¬ìê°€ í¥ë¯¸ë¡œìš´ ì£¼ì œ ë¨¼ì € ë˜ì§€ê¸°
- ì˜ˆ: "BTS ë©¤ë²„ ì¤‘ ëˆ„ê°€ ë¦¬ë”ì‹­ ìš´ì´ ê°€ì¥ ê°•í• ê¹Œìš”?"
- ì˜ˆ: "K-dramaì— ë‚˜ì˜¨ ì‚¬ì£¼ ì¥ë©´ ë¶„ì„í•´ë³´ê¸°"
```

#### 3. í”„ë¦¬ë¯¸ì—„ ìœ ë„
```
- ë¬´ë£Œ ì‚¬ìš©ìì˜ ì§ˆë¬¸ì— "í”„ë¦¬ë¯¸ì—„ì—ì„œëŠ” ë” ìì„¸í•œ ë¶„ì„ì´ ë‚˜ì™€ìš”!" ìì—°ìŠ¤ëŸ½ê²Œ ì–¸ê¸‰
- ì›” 1íšŒ "í”„ë¦¬ë¯¸ì—„ ì²´í—˜ ë°ì´" (24ì‹œê°„ ë¬´ë£Œ ì²´í—˜)
```

### ë°ì´í„° ê°œì¸ì •ë³´ ë³´í˜¸

#### âš ï¸ ì¤‘ìš” ì‚¬í•­
```
âœ… DO:
- í†µê³„ ë°ì´í„°ë§Œ ì €ì¥ (ë©”ì‹œì§€ ê°œìˆ˜, í‚¤ì›Œë“œ ë¹ˆë„)
- AI ìš”ì•½ì—ì„œ ê°œì¸ ì‹ë³„ ì •ë³´ ì œê±°
- ì‚¬ìš©ìì—ê²Œ ë¶„ì„ ëª©ì  ëª…ì‹œ ë° ë™ì˜ íšë“

âŒ DON'T:
- ê°œì¸ ìƒë…„ì›”ì¼ ë“± ë¯¼ê° ì •ë³´ ë¡œê·¸ ì €ì¥
- ì œ3ìì—ê²Œ ì›ë³¸ ëŒ€í™” ë¡œê·¸ ê³µìœ 
- ë§ˆì¼€íŒ… ëª©ì ìœ¼ë¡œ ê°œì¸ ì •ë³´ í™œìš©
```

---

## ğŸ“Š ì„±ê³¼ ì¸¡ì • (KPIs)

### ì»¤ë®¤ë‹ˆí‹° ê±´ê°•ë„
| ì§€í‘œ | ëª©í‘œ | ì¸¡ì • ë°©ë²• |
|-----|------|---------|
| ì¼ì¼ í™œì„± ì‚¬ìš©ì (DAU) | 50ëª… | `total_users` í‰ê·  |
| ì¼ì¼ ë©”ì‹œì§€ ìˆ˜ | 200ê°œ | `total_messages` |
| ì§ˆë¬¸ ì‘ë‹µë¥  | 80% | FAQ ìŠ¹ì¸ìœ¨ |
| í”„ë¦¬ë¯¸ì—„ ì „í™˜ìœ¨ | 5% | ì»¤ë®¤ë‹ˆí‹° ë©¤ë²„ â†’ ê²°ì œ ë¹„ìœ¨ |

### ë¹„ì¦ˆë‹ˆìŠ¤ ì„íŒ©íŠ¸
| ì§€í‘œ | ëª©í‘œ | ì¸¡ì • ë°©ë²• |
|-----|------|---------|
| ì»¤ë®¤ë‹ˆí‹° ìœ ì… ì‹ ê·œ ê°€ì… | ì›” 100ëª… | ì»¤ë®¤ë‹ˆí‹° ë§í¬ë¡œ ê°€ì…í•œ ì‚¬ìš©ì ì¶”ì  |
| FAQ ê¸°ë°˜ ê³ ê° ì§€ì› ê°ì†Œ | 30% ê°ì†Œ | ì¤‘ë³µ ë¬¸ì˜ ê°ì†Œìœ¨ |
| í‰ê·  ì‚¬ìš©ì ìœ ì§€ ê¸°ê°„ | 3ê°œì›”+ | ì»¤ë®¤ë‹ˆí‹° ì°¸ì—¬ì retention |

---

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: n8n ì›Œí¬í”Œë¡œ ì‹¤íŒ¨
**ì¦ìƒ**: íŒŒì¼ ì—…ë¡œë“œí–ˆëŠ”ë° ë¶„ì„ ì•ˆ ë¨
**í•´ê²°**:
1. n8n ì‹¤í–‰ ë¡œê·¸ í™•ì¸
2. Google Drive Trigger ìƒíƒœ í™•ì¸
3. OpenAI API í‚¤ ìœ íš¨ì„± í™•ì¸
4. Supabase ì—°ê²° í™•ì¸

### ë¬¸ì œ 2: íŒŒì‹± ì‹¤íŒ¨
**ì¦ìƒ**: ë©”ì‹œì§€ ê°œìˆ˜ê°€ 0ìœ¼ë¡œ ë‚˜ì˜´
**í•´ê²°**:
1. ì¹´ì¹´ì˜¤í†¡ ë‚´ë³´ë‚´ê¸° í¬ë§· í™•ì¸ (ë‚ ì§œ í˜•ì‹)
2. íŒŒì¼ ì¸ì½”ë”© í™•ì¸ (UTF-8 vs EUC-KR)
3. ì •ê·œì‹ íŒ¨í„´ ì¡°ì • í•„ìš”

### ë¬¸ì œ 3: ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ ë¶ˆê°€
**ì¦ìƒ**: 403 Forbidden
**í•´ê²°**:
1. JWT í† í° í™•ì¸
2. ì‚¬ìš©ì roleì´ 'admin'ì¸ì§€ í™•ì¸
3. Supabase RLS ì •ì±… í™•ì¸

---

## ğŸ“š ë‹¤ìŒ ë‹¨ê³„

### ë‹¨ê¸° (1ê°œì›”)
- [ ] ì»¤ë®¤ë‹ˆí‹° 100ëª… ë‹¬ì„±
- [ ] ì¼ì¼ ìë™ ë¦¬í¬íŠ¸ ì•ˆì •í™”
- [ ] FAQ 50ê°œ ì´ìƒ ì¶•ì 
- [ ] í”„ë¦¬ë¯¸ì—„ ì „í™˜ìœ¨ 5% ë‹¬ì„±

### ì¤‘ê¸° (3ê°œì›”)
- [ ] ì»¤ë®¤ë‹ˆí‹° 500ëª… ë‹¬ì„±
- [ ] ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ êµ¬ì¶•
- [ ] AI ì±—ë´‡ ìë™ ì‘ë‹µ ì‹œìŠ¤í…œ
- [ ] ì»¤ë®¤ë‹ˆí‹° ë ˆë²¨/ë°°ì§€ ì‹œìŠ¤í…œ

### ì¥ê¸° (6ê°œì›”)
- [ ] ì»¤ë®¤ë‹ˆí‹° 1,000ëª…+ ë‹¬ì„±
- [ ] ë‹¤êµ­ì–´ ì»¤ë®¤ë‹ˆí‹° (ì¼ë³¸, ì˜ì–´)
- [ ] ì»¤ë®¤ë‹ˆí‹° ì£¼ë„ ì½˜í…ì¸  ìƒì„±
- [ ] ì˜¤í”„ë¼ì¸ ì´ë²¤íŠ¸ ì—°ê³„

---

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- [ì¹´ì¹´ì˜¤í†¡ ì˜¤í”ˆì±„íŒ… ìë™í™” ê°€ì´ë“œ](../KAKAO_OPENCHAT_AUTOMATION.md)
- [n8n ì›Œí¬í”Œë¡œ ì˜ˆì œ](./N8N_WORKFLOW_EXAMPLE.md)
- [ì¹´ì¹´ì˜¤í†¡ íŒŒì‹± ìŠ¤í¬ë¦½íŠ¸](./KAKAO_PARSER_SCRIPT.md)
- [ë§ˆì¼€íŒ… ì „ëµ](../../marketing/README.md)
- [í”„ë¡ íŠ¸ì—”ë“œ ìš”êµ¬ì‚¬í•­](../FRONTEND_REQUIREMENTS.md)

---

**ì‘ì„±ì**: Development Team
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-11-13
**ìƒíƒœ**: ì™„ì„± âœ… | ì‹¤ì „ ë°°í¬ ì¤€ë¹„ ì™„ë£Œ âœ…

**ë¬¸ì˜**: aimihigh9@gmail.com
