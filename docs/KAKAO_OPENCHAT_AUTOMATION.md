# 카카오톡 오픈채팅 자동 수집 및 분석 가이드

**작성일**: 2025-11-13
**프로젝트**: ChatJu Premium - Community Management
**목적**: 커뮤니티 피드백 자동 수집 및 AI 요약

---

## 📌 결론부터

1. **카톡 오픈채팅 "내용"을 공식 API로 자동 수집하는 방법은 현재 없다.**
2. **그래도 반-자동/자동 파이프라인은 만들 수 있다.**
3. **n8n으로도 충분히 구현 가능하지만, 핵심은 "어디까지를 합법·안전·안정적으로 자동화할 것인가" 설계 문제다.**

---

## 🚫 1. 공식 API로는 안 된다

### Kakao Developers가 제공하는 것들

| API 종류 | 기능 | 오픈채팅 로그 읽기 |
|---------|------|-----------------|
| **KakaoTalk Message API** | 보내기 전용 (사용자→친구) | ❌ 불가능 |
| **Share API** | 콘텐츠 공유 | ❌ 불가능 |
| **비즈메시지** | 알림톡, 친구톡 | ❌ 불가능 |
| **KakaoTalk Channel** | 파트너 솔루션 (센드버드, Sinch 등) | ❌ 일반 대화 로그 읽기 불가 |

**핵심 문제**:
- 오픈채팅방 메시지를 읽어오는 정식 "history/read API"는 **존재하지 않음**
- 따라서 "링크만 넣으면 알아서 읽고 요약해주는 공식 API/봇" 같은 건 **구조상 불가능**

---

## ⚠️ 2. 비공식/우회 프로그램은 있는가?

### 존재하는 방법들

**있다**. 하지만 전부 "클라이언트 자동화/후킹" 계열이고, 공통적으로:

| 특징 | 상태 |
|-----|------|
| 카카오 공식 지원 | ❌ 없음 |
| 업데이트 시 | ⚠️ 깨질 수 있음 |
| 계정 보안/약관 | ⚠️ 리스크 있음 |
| 법적 위험 | ⚠️ 제3자 방/타인 데이터 사용 시 위험 |

### 비공식 방법 예시

1. **PC 카톡 UI 자동 조작**
   - GitHub의 kakaotalk-chat-exporter 류 프로젝트
   - "대화 내보내기"를 반복하는 스크립트/툴
   - 화면 인식·클릭 자동화로 내보내기 수행

2. **안드로이드 Notification Listener**
   - 알림에 뜨는 메시지만 긁어오는 앱들
   - ❌ 포그라운드/오래된 메시지/전체 로그 커버 못 함

### ⚠️ 판단 포인트

이 영역은 **"가능은 한데 프로덕션용 인프라로 두기엔 위험한 편"**

✅ **안전한 범위**:
- 내 계정
- 내가 운영하는 방
- 참여자 공지 완료
- 로그를 분석용으로만 사용

⚠️ 그래도 비공식 후킹은 항상 **리스크를 깔고 가는 선택지**

---

## ✅ 3. 현실적인 설계: "합법 내에서 최대 자동화"

### 패턴: "Export → n8n → 요약/분석 자동화"

당신이 방 운영자라는 전제에서, 지금 가능한 베스트:

```
┌─────────────────┐
│ 1. 데이터 확보   │ ← 카카오톡 "대화 내보내기"
└────────┬────────┘
         │
         ↓
┌─────────────────┐
│ 2. 파일 인입     │ ← Google Drive Trigger / Email
└────────┬────────┘
         │
         ↓
┌─────────────────┐
│ 3. 파싱 & 전처리 │ ← n8n Function Node
└────────┬────────┘
         │
         ↓
┌─────────────────┐
│ 4. LLM 분석      │ ← OpenAI / Gemini API
└────────┬────────┘
         │
         ↓
┌─────────────────┐
│ 5. 결과 배포     │ ← Notion / Slack / Email
└─────────────────┘
```

### 3.1 데이터 확보 레이어

#### 방법 A: 완전 합법 + 단순 ✅
- 오픈채팅에서 정기적으로 **"대화 내보내기"** 실행 → txt/csv

#### 방법 B: 반자동 ⚠️
- PC 카톡에서 AutoHotkey/매크로로:
  - 매일 새벽 "해당 방 열기 → 위로 스크롤 → 전체 선택 → 복사 → 로컬 txt 저장" 자동화
  - ⚠️ UI 자동화일 뿐 서버 해킹은 아니지만, 약관 해석상 애매한 지점
  - "로컬 개인용 도구" 수준으로만 사용 권장

### 3.2 파일 인입 트리거 (n8n / 기타)

내보낸 파일을:

| 방법 | n8n Trigger |
|------|------------|
| Google Drive 업로드 | **Google Drive Trigger** |
| Dropbox 업로드 | **Dropbox Trigger** |
| 이메일 첨부 전송 | **IMAP Email Trigger** |
| 로컬 파일 감시 | **File System Trigger** (self-hosted) |

→ 트리거 발생 시 workflow 시작

### 3.3 파싱 & 전처리 (n8n 내부)

**Function 노드** 또는 **Code 노드**로:

```javascript
// 파싱 작업
- 날짜/유저/메시지 컬럼 파싱
- 시스템 메시지/입퇴장/이모티콘 제거
- URL 포함 메시지 따로 수집

// 결과 구조화
{
  "originalLog": [...],          // 원본 로그 JSON
  "links": [...],                // 링크 리스트
  "qaPairs": [...],              // 프롬프트/Q&A 후보 메시지
  "topUsers": [...],             // 활발한 사용자
  "keywords": [...]              // 주요 키워드
}
```

### 3.4 LLM 분석 레이어

**n8n의 OpenAI 노드** (또는 HTTP Request로 직접 호출):

| 분석 작업 | AI 프롬프트 예시 |
|----------|----------------|
| 링크 요약 테이블 생성 | "다음 링크들을 카테고리별로 정리하고 요약해줘" |
| 일일/주간 하이라이트 | "오늘 대화에서 가장 중요한 3가지 토픽은?" |
| 자주 나오는 질문/답변 | "사용자들이 가장 많이 물어본 질문 5개는?" |
| 주제별 클러스터링 | "대화를 주제별로 그룹화하고 각 그룹의 핵심을 요약해줘" |

**현재 우리가 방 로그로 했던 것** (링크 모으고, 주요 논의 축 요약)을 **전부 자동화 가능**

### 3.5 결과 배포

n8n으로:

| 배포 채널 | n8n Node |
|----------|----------|
| 노션 페이지 업데이트 | **Notion Node** |
| 구글 시트에 링크/요약 적재 | **Google Sheets Node** |
| 이메일 발송 | **Email Node (SMTP)** |
| 슬랙 메시지 | **Slack Node** |
| 디스코드 웹훅 | **Discord Node** |

→ "오늘의 오픈채팅 요약" 자동 발송

### ✅ 이 방법의 장점

| 항목 | 상태 |
|------|------|
| Kakao 내부 API | ✅ 건드리지 않음 |
| 데이터 소스 | ✅ 운영자 권한으로 얻을 수 있는 내보내기 결과만 사용 |
| 오케스트레이션 | ✅ n8n을 도구로 활용 |
| 안정성 | ✅ 리스크 밸런스 상 가장 합리적 |

---

## 🚀 4. "완전 자동 실시간"이 꼭 필요하다면?

### 조건부 대안

#### 옵션 1: KakaoTalk 채널 전환 (공식 방법)

카카오톡 오픈채팅 → **KakaoTalk 채널 (비즈니스)** + 공식 파트너 솔루션으로 옮기면:

| 파트너 솔루션 | 기능 |
|-------------|------|
| **Sinch** | KakaoTalk Channel 연동 API, 서버/webhook 수신 가능 |
| **Sendbird** | 실시간 메시징 플랫폼, Kakao 채널 통합 |
| **respond.io** | 멀티채널 고객 응대, Kakao 지원 |

→ 들어오는 메시지를 **서버/webhook**으로 받아 n8n에 연결 가능

⚠️ **단점**: "오픈채팅 커뮤니티" 느낌과 완전히 다른 구조 → 전략 선택 필요

#### 옵션 2: 비공식 실시간 수집 도구 (클라이언트 후킹)

- 기술적으로는 "n8n 앞단에 스크래퍼" 붙이면 끝
- ⚠️ 안정성/법/보안 이슈 때문에 **사업/브랜드 레벨에서 채택하기 매우 애매한 옵션**

---

## 📋 5. 정리

### 핵심 결론

| 항목 | 현실 |
|------|------|
| 공식 "오픈채팅 읽기 API" | ❌ 없다 |
| 링크만 던져서 자동 요약 | ❌ 전부 비공식/스크래핑 계열 |
| 실제로 쓸만한 구조 | ✅ 있다 (Export + n8n 파이프라인) |

### 실용적인 접근

| 방법 | 설명 | 안정성 |
|------|------|--------|
| **운영자 정기 Export** | 로그 파일 생성 (수동/반자동) | ⭐⭐⭐⭐⭐ |
| **n8n 자동화** | 파일 트리거 → 파싱 → 요약 → 정리 | ⭐⭐⭐⭐⭐ |
| **KakaoTalk 채널 전환** | 공식 API 구조로 판 옮기기 | ⭐⭐⭐⭐ |
| **비공식 후킹** | 리스크 높음 | ⭐⭐ |

### 완전 자동·실시간이 꼭 필요하면

→ 오픈채팅이 아니라 **KakaoTalk 채널/외부 채널 + 공식 API 구조**로 판을 옮기는 것까지 고려

---

## 🎯 ChatJu Premium 프로젝트 적용 방안

### 사용 시나리오

1. **커뮤니티 피드백 수집**
   - 사주 관련 질문/요청 자동 수집
   - 버그 리포트 및 기능 제안 취합
   - 사용자 만족도 분석

2. **마케팅 인사이트**
   - K-pop/K-drama 관련 대화 트렌드 분석
   - 바이럴 콘텐츠 아이디어 발굴
   - 경쟁사 언급 모니터링

3. **고객 지원 자동화**
   - 자주 묻는 질문 (FAQ) 자동 생성
   - 답변 템플릿 최적화
   - 프리미엄 전환 타이밍 분석

### 통합 아키텍처

```
┌──────────────────────────────────────────────┐
│ ChatJu 오픈채팅방 (카카오톡)                   │
│ - 사주 상담 커뮤니티                           │
│ - K-wave 팬 교류                              │
│ - 서비스 피드백                                │
└──────────────┬───────────────────────────────┘
               │
               ↓ (정기 내보내기)
┌──────────────────────────────────────────────┐
│ Google Drive / Email                         │
│ - 일일 대화 로그 저장                         │
└──────────────┬───────────────────────────────┘
               │
               ↓ (n8n Trigger)
┌──────────────────────────────────────────────┐
│ n8n Workflow                                 │
│ 1. 파일 파싱 (날짜/유저/메시지)               │
│ 2. OpenAI/Gemini 분석                        │
│ 3. 인사이트 추출                              │
└──────────────┬───────────────────────────────┘
               │
               ↓ (결과 배포)
┌──────────────────────────────────────────────┐
│ ✅ Notion: 주간 커뮤니티 리포트               │
│ ✅ Slack: 긴급 이슈 알림                      │
│ ✅ Supabase: FAQ 데이터베이스 업데이트        │
│ ✅ Email: 팀에게 주간 요약 발송               │
└──────────────────────────────────────────────┘
```

---

## 📚 다음 단계

### 1단계: 수동 프로세스 확립
- [ ] 오픈채팅방 개설 및 초기 사용자 모집
- [ ] 주 1회 "대화 내보내기" 실행 및 저장
- [ ] 수동으로 주요 인사이트 정리

### 2단계: 반자동화 구축
- [ ] n8n 설치 및 기본 워크플로 구성
- [ ] 파일 파싱 스크립트 작성
- [ ] AI 요약 프롬프트 최적화

### 3단계: 완전 자동화
- [ ] 파일 자동 업로드 시스템 (매크로/스크립트)
- [ ] n8n 워크플로 고도화
- [ ] 대시보드 및 리포트 자동 생성

### 4단계: 스케일링 (선택)
- [ ] KakaoTalk 채널 전환 검토
- [ ] 공식 파트너 솔루션 연동
- [ ] 완전 실시간 처리 구축

---

## 🔗 관련 문서

- [n8n 워크플로 예제](./community/N8N_WORKFLOW_EXAMPLE.md) ← 다음 문서
- [카카오톡 파싱 스크립트](./community/KAKAO_PARSER_SCRIPT.md) ← 다음 문서
- [커뮤니티 관리 가이드](./community/COMMUNITY_MANAGEMENT.md) ← 다음 문서

---

**작성자**: Development Team
**최종 업데이트**: 2025-11-13
**상태**: 기본 전략 수립 완료 ✅ | 구현 예제 작성 중 🚧
